{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Card,CardContent,Typography,Alert,AlertTitle,Box,Chip}from'@mui/material';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const AnomalyAlerts=_ref=>{let{storeId}=_ref;const[anomalies,setAnomalies]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchAnomalies();// Refresh anomalies every 30 seconds\nconst interval=setInterval(fetchAnomalies,30000);return()=>clearInterval(interval);},[storeId]);const fetchAnomalies=async()=>{try{const data=await apiService.detectAnomalies(storeId);setAnomalies(data);}catch(error){console.error('Failed to fetch anomalies:',error);}finally{setLoading(false);}};const getSeverityColor=severity=>{switch(severity){case'high':return'error';case'medium':return'warning';case'low':return'info';default:return'default';}};const getAnomalyIcon=type=>{switch(type){case'high_failure_rate':return'‚ö†Ô∏è';case'slow_processing':return'üêå';case'no_orders':return'üìâ';default:return'‚ùó';}};return/*#__PURE__*/_jsx(Card,{sx:{height:'400px'},children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Anomaly Detection\"}),loading?/*#__PURE__*/_jsx(Typography,{color:\"textSecondary\",children:\"Checking for anomalies...\"}):anomalies.length===0?/*#__PURE__*/_jsxs(Alert,{severity:\"success\",children:[/*#__PURE__*/_jsx(AlertTitle,{children:\"All Systems Normal\"}),\"No anomalies detected. Store is operating normally.\"]}):/*#__PURE__*/_jsx(Box,{sx:{maxHeight:'320px',overflow:'auto'},children:anomalies.map((anomaly,index)=>/*#__PURE__*/_jsx(Alert,{severity:getSeverityColor(anomaly.severity),sx:{mb:2},children:/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',gap:1},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:getAnomalyIcon(anomaly.type)}),/*#__PURE__*/_jsxs(Box,{sx:{flex:1},children:[/*#__PURE__*/_jsxs(AlertTitle,{sx:{display:'flex',alignItems:'center',gap:1},children:[anomaly.type.replace(/_/g,' ').toUpperCase(),/*#__PURE__*/_jsx(Chip,{label:anomaly.severity,size:\"small\",color:getSeverityColor(anomaly.severity)})]}),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:anomaly.description}),/*#__PURE__*/_jsxs(Typography,{variant:\"caption\",color:\"textSecondary\",children:[\"Detected at \",new Date(anomaly.detected_at).toLocaleTimeString()]})]})]})},anomaly.id||index))})]})});};","map":{"version":3,"names":["React","useState","useEffect","Card","CardContent","Typography","Alert","AlertTitle","Box","Chip","apiService","jsx","_jsx","jsxs","_jsxs","AnomalyAlerts","_ref","storeId","anomalies","setAnomalies","loading","setLoading","fetchAnomalies","interval","setInterval","clearInterval","data","detectAnomalies","error","console","getSeverityColor","severity","getAnomalyIcon","type","sx","height","children","variant","gutterBottom","color","length","maxHeight","overflow","map","anomaly","index","mb","display","alignItems","gap","flex","replace","toUpperCase","label","size","description","Date","detected_at","toLocaleTimeString","id"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/AnomalyAlerts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  CardContent, \n  Typography, \n  Alert,\n  AlertTitle,\n  Box,\n  Chip\n} from '@mui/material';\nimport { Anomaly } from '../types';\nimport { apiService } from '../services/api';\n\ninterface AnomalyAlertsProps {\n  storeId: string;\n}\n\nexport const AnomalyAlerts: React.FC<AnomalyAlertsProps> = ({ storeId }) => {\n  const [anomalies, setAnomalies] = useState<Anomaly[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchAnomalies();\n    // Refresh anomalies every 30 seconds\n    const interval = setInterval(fetchAnomalies, 30000);\n    return () => clearInterval(interval);\n  }, [storeId]);\n\n  const fetchAnomalies = async () => {\n    try {\n      const data = await apiService.detectAnomalies(storeId);\n      setAnomalies(data);\n    } catch (error) {\n      console.error('Failed to fetch anomalies:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch(severity) {\n      case 'high': return 'error';\n      case 'medium': return 'warning';\n      case 'low': return 'info';\n      default: return 'default';\n    }\n  };\n\n  const getAnomalyIcon = (type: string) => {\n    switch(type) {\n      case 'high_failure_rate': return '‚ö†Ô∏è';\n      case 'slow_processing': return 'üêå';\n      case 'no_orders': return 'üìâ';\n      default: return '‚ùó';\n    }\n  };\n\n  return (\n    <Card sx={{ height: '400px' }}>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Anomaly Detection\n        </Typography>\n        \n        {loading ? (\n          <Typography color=\"textSecondary\">\n            Checking for anomalies...\n          </Typography>\n        ) : anomalies.length === 0 ? (\n          <Alert severity=\"success\">\n            <AlertTitle>All Systems Normal</AlertTitle>\n            No anomalies detected. Store is operating normally.\n          </Alert>\n        ) : (\n          <Box sx={{ maxHeight: '320px', overflow: 'auto' }}>\n            {anomalies.map((anomaly, index) => (\n              <Alert \n                key={anomaly.id || index}\n                severity={getSeverityColor(anomaly.severity) as any}\n                sx={{ mb: 2 }}\n              >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Typography variant=\"h6\">\n                    {getAnomalyIcon(anomaly.type)}\n                  </Typography>\n                  <Box sx={{ flex: 1 }}>\n                    <AlertTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      {anomaly.type.replace(/_/g, ' ').toUpperCase()}\n                      <Chip \n                        label={anomaly.severity} \n                        size=\"small\"\n                        color={getSeverityColor(anomaly.severity) as any}\n                      />\n                    </AlertTitle>\n                    <Typography variant=\"body2\">\n                      {anomaly.description}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"textSecondary\">\n                      Detected at {new Date(anomaly.detected_at).toLocaleTimeString()}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Alert>\n            ))}\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}