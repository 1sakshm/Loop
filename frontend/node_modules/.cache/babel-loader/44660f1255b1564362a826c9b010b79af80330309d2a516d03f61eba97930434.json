{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,CircularProgress,Alert}from'@mui/material';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const StoreList=_ref=>{let{onSelect,selectedId}=_ref;const[stores,setStores]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{let mounted=true;const load=async()=>{setLoading(true);setError(null);try{const s=await apiService.getStores();if(mounted)setStores(s);}catch(e){setError('Failed to load stores');}finally{if(mounted)setLoading(false);}};load();return()=>{mounted=false;};},[]);if(loading)return/*#__PURE__*/_jsx(CircularProgress,{});if(error)return/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error});return/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Name\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Platform\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"City\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:stores.map(s=>{var _s$location;return/*#__PURE__*/_jsxs(TableRow,{hover:true,selected:selectedId===s.id,onClick:()=>onSelect&&onSelect(s),style:{cursor:'pointer'},children:[/*#__PURE__*/_jsx(TableCell,{children:s.name}),/*#__PURE__*/_jsx(TableCell,{children:s.platform}),/*#__PURE__*/_jsx(TableCell,{children:s.status}),/*#__PURE__*/_jsx(TableCell,{children:(_s$location=s.location)===null||_s$location===void 0?void 0:_s$location.city})]},s.id);})})]})});};","map":{"version":3,"names":["React","useEffect","useState","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","CircularProgress","Alert","apiService","jsx","_jsx","jsxs","_jsxs","StoreList","_ref","onSelect","selectedId","stores","setStores","loading","setLoading","error","setError","mounted","load","s","getStores","e","severity","children","component","size","map","_s$location","hover","selected","id","onClick","style","cursor","name","platform","status","location","city"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/StoreList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, CircularProgress, Alert } from '@mui/material';\r\nimport { Store } from '../types';\r\nimport { apiService } from '../services/api';\r\n\r\ninterface Props {\r\n  onSelect?: (store: Store) => void;\r\n  selectedId?: string | null;\r\n}\r\n\r\nexport const StoreList: React.FC<Props> = ({ onSelect, selectedId }) => {\r\n  const [stores, setStores] = useState<Store[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const load = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const s = await apiService.getStores();\r\n        if (mounted) setStores(s);\r\n      } catch (e) {\r\n        setError('Failed to load stores');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, []);\r\n\r\n  if (loading) return <CircularProgress />;\r\n  if (error) return <Alert severity=\"error\">{error}</Alert>;\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Name</TableCell>\r\n            <TableCell>Platform</TableCell>\r\n            <TableCell>Status</TableCell>\r\n            <TableCell>City</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {stores.map(s => (\r\n            <TableRow key={s.id} hover selected={selectedId === s.id} onClick={() => onSelect && onSelect(s)} style={{ cursor: 'pointer' }}>\r\n              <TableCell>{s.name}</TableCell>\r\n              <TableCell>{s.platform}</TableCell>\r\n              <TableCell>{s.status}</TableCell>\r\n              <TableCell>{s.location?.city}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}