{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Paper,Chip,CircularProgress,Alert,Typography}from'@mui/material';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const currency=new Intl.NumberFormat('en-US',{style:'currency',currency:'USD'});export const OrdersTable=_ref=>{let{storeId}=_ref;const[orders,setOrders]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{let mounted=true;const load=async()=>{setLoading(true);setError(null);try{const data=await apiService.getDashboardStore(storeId);if(mounted)setOrders(data.orders||[]);}catch(e){setError('Failed to load orders');}finally{if(mounted)setLoading(false);}};load();return()=>{mounted=false;};},[storeId]);const statusColor=status=>{if(status==='completed')return'success';if(status==='failed')return'error';if(status==='cancelled')return'warning';return'default';};if(loading)return/*#__PURE__*/_jsx(CircularProgress,{});if(error)return/*#__PURE__*/_jsx(Alert,{severity:\"error\",children:error});if(!orders.length)return/*#__PURE__*/_jsx(Typography,{children:\"No orders available\"});return/*#__PURE__*/_jsx(TableContainer,{component:Paper,children:/*#__PURE__*/_jsxs(Table,{size:\"small\",children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Order ID\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Status\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Amount\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Items\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Processing (s)\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Created\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:orders.map(o=>{var _o$processing_time_se;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:o.id}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsx(Chip,{label:o.status,color:statusColor(o.status),size:\"small\"})}),/*#__PURE__*/_jsx(TableCell,{children:currency.format(o.total_amount)}),/*#__PURE__*/_jsx(TableCell,{children:o.items_count}),/*#__PURE__*/_jsx(TableCell,{children:(_o$processing_time_se=o.processing_time_seconds)!==null&&_o$processing_time_se!==void 0?_o$processing_time_se:'-'}),/*#__PURE__*/_jsx(TableCell,{children:new Date(o.created_at).toLocaleString()})]},o.id);})})]})});};","map":{"version":3,"names":["React","useEffect","useState","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Paper","Chip","CircularProgress","Alert","Typography","apiService","jsx","_jsx","jsxs","_jsxs","currency","Intl","NumberFormat","style","OrdersTable","_ref","storeId","orders","setOrders","loading","setLoading","error","setError","mounted","load","data","getDashboardStore","e","statusColor","status","severity","children","length","component","size","map","o","_o$processing_time_se","id","label","color","format","total_amount","items_count","processing_time_seconds","Date","created_at","toLocaleString"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/OrdersTable.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Table, TableBody, TableCell, TableContainer, TableHead, TableRow, Paper, Chip, CircularProgress, Alert, Typography } from '@mui/material';\r\nimport { apiService } from '../services/api';\r\nimport { Order } from '../types';\r\n\r\ninterface Props {\r\n  storeId: string;\r\n}\r\n\r\nconst currency = new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' });\r\n\r\nexport const OrdersTable: React.FC<Props> = ({ storeId }) => {\r\n  const [orders, setOrders] = useState<Order[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  useEffect(() => {\r\n    let mounted = true;\r\n    const load = async () => {\r\n      setLoading(true);\r\n      setError(null);\r\n      try {\r\n        const data = await apiService.getDashboardStore(storeId);\r\n        if (mounted) setOrders(data.orders || []);\r\n      } catch (e) {\r\n        setError('Failed to load orders');\r\n      } finally {\r\n        if (mounted) setLoading(false);\r\n      }\r\n    };\r\n    load();\r\n    return () => { mounted = false; };\r\n  }, [storeId]);\r\n\r\n  const statusColor = (status: string) => {\r\n    if (status === 'completed') return 'success';\r\n    if (status === 'failed') return 'error';\r\n    if (status === 'cancelled') return 'warning';\r\n    return 'default';\r\n  };\r\n\r\n  if (loading) return <CircularProgress />;\r\n  if (error) return <Alert severity=\"error\">{error}</Alert>;\r\n  if (!orders.length) return <Typography>No orders available</Typography>;\r\n\r\n  return (\r\n    <TableContainer component={Paper}>\r\n      <Table size=\"small\">\r\n        <TableHead>\r\n          <TableRow>\r\n            <TableCell>Order ID</TableCell>\r\n            <TableCell>Status</TableCell>\r\n            <TableCell>Amount</TableCell>\r\n            <TableCell>Items</TableCell>\r\n            <TableCell>Processing (s)</TableCell>\r\n            <TableCell>Created</TableCell>\r\n          </TableRow>\r\n        </TableHead>\r\n        <TableBody>\r\n          {orders.map(o => (\r\n            <TableRow key={o.id}>\r\n              <TableCell>{o.id}</TableCell>\r\n              <TableCell><Chip label={o.status} color={statusColor(o.status)} size=\"small\" /></TableCell>\r\n              <TableCell>{currency.format(o.total_amount)}</TableCell>\r\n              <TableCell>{o.items_count}</TableCell>\r\n              <TableCell>{o.processing_time_seconds ?? '-'}</TableCell>\r\n              <TableCell>{new Date(o.created_at).toLocaleString()}</TableCell>\r\n            </TableRow>\r\n          ))}\r\n        </TableBody>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}