{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Container,Grid,Typography,Box,Alert}from'@mui/material';import{StoreSelector}from'./components/StoreSelector';import{MetricsCards}from'./components/MetricsCards';import{HealthIndicator}from'./components/HealthIndicator';import{AnomalyAlerts}from'./components/AnomalyAlerts';import{SummaryCards}from'./components/SummaryCards';import{StoreList}from'./components/StoreList';import{OrdersTable}from'./components/OrdersTable';import'./App.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _selectedStore$id;const[selectedStore,setSelectedStore]=useState(null);const[metrics,setMetrics]=useState(null);const[healthScore,setHealthScore]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);// Fetch metrics when store is selected\nuseEffect(()=>{if(selectedStore){fetchStoreData(selectedStore.id);// Set up interval to refresh data every 30 seconds\nconst interval=setInterval(()=>{fetchStoreData(selectedStore.id);},30000);return()=>clearInterval(interval);}},[selectedStore]);const fetchStoreData=async storeId=>{setLoading(true);setError(null);try{// TODO: Fetch metrics and health score from your backend\n// const metricsData = await apiService.getStoreMetrics(storeId);\n// const healthData = await apiService.getHealthScore(storeId);\n// setMetrics(metricsData);\n// setHealthScore(healthData);\n// Placeholder - remove when implementing\nconsole.log('Fetching data for store:',storeId);}catch(err){setError('Failed to fetch store data');console.error(err);}finally{setLoading(false);}};return/*#__PURE__*/_jsx(Container,{maxWidth:\"xl\",children:/*#__PURE__*/_jsxs(Box,{sx:{py:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Restaurant Dashboard\"}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(SummaryCards,{})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(StoreList,{onSelect:setSelectedStore,selectedId:(_selectedStore$id=selectedStore===null||selectedStore===void 0?void 0:selectedStore.id)!==null&&_selectedStore$id!==void 0?_selectedStore$id:null})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(StoreSelector,{onStoreSelect:setSelectedStore,selectedStore:selectedStore})}),selectedStore&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsx(HealthIndicator,{storeId:selectedStore.id,healthScore:healthScore,loading:loading})}),selectedStore&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:8,children:/*#__PURE__*/_jsx(MetricsCards,{metrics:metrics,loading:loading})}),selectedStore&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(AnomalyAlerts,{storeId:selectedStore.id})}),selectedStore&&/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:6,children:/*#__PURE__*/_jsx(OrdersTable,{storeId:selectedStore.id})})]})]})});}export default App;","map":{"version":3,"names":["React","useState","useEffect","Container","Grid","Typography","Box","Alert","StoreSelector","MetricsCards","HealthIndicator","AnomalyAlerts","SummaryCards","StoreList","OrdersTable","jsx","_jsx","jsxs","_jsxs","App","_selectedStore$id","selectedStore","setSelectedStore","metrics","setMetrics","healthScore","setHealthScore","loading","setLoading","error","setError","fetchStoreData","id","interval","setInterval","clearInterval","storeId","console","log","err","maxWidth","children","sx","py","variant","component","gutterBottom","severity","mb","container","spacing","item","xs","onSelect","selectedId","onStoreSelect","md"],"sources":["C:/Users/Saksham/Loop/frontend/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Grid, Typography, Box, Alert } from '@mui/material';\nimport { StoreSelector } from './components/StoreSelector';\nimport { MetricsCards } from './components/MetricsCards';\nimport { HealthIndicator } from './components/HealthIndicator';\nimport { OrdersFeed } from './components/OrdersFeed';\nimport { AnomalyAlerts } from './components/AnomalyAlerts';\nimport { SummaryCards } from './components/SummaryCards';\nimport { StoreList } from './components/StoreList';\nimport { OrdersTable } from './components/OrdersTable';\nimport { apiService } from './services/api';\nimport { Store, StoreMetrics, HealthScore } from './types';\nimport './App.css';\n\nfunction App() {\n  const [selectedStore, setSelectedStore] = useState<Store | null>(null);\n  const [metrics, setMetrics] = useState<StoreMetrics | null>(null);\n  const [healthScore, setHealthScore] = useState<HealthScore | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch metrics when store is selected\n  useEffect(() => {\n    if (selectedStore) {\n      fetchStoreData(selectedStore.id);\n      // Set up interval to refresh data every 30 seconds\n      const interval = setInterval(() => {\n        fetchStoreData(selectedStore.id);\n      }, 30000);\n      \n      return () => clearInterval(interval);\n    }\n  }, [selectedStore]);\n\n  const fetchStoreData = async (storeId: string) => {\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // TODO: Fetch metrics and health score from your backend\n      // const metricsData = await apiService.getStoreMetrics(storeId);\n      // const healthData = await apiService.getHealthScore(storeId);\n      // setMetrics(metricsData);\n      // setHealthScore(healthData);\n      \n      // Placeholder - remove when implementing\n      console.log('Fetching data for store:', storeId);\n    } catch (err) {\n      setError('Failed to fetch store data');\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Container maxWidth=\"xl\">\n      <Box sx={{ py: 3 }}>\n        <Typography variant=\"h4\" component=\"h1\" gutterBottom>\n          Restaurant Dashboard\n        </Typography>\n        \n        {error && (\n          <Alert severity=\"error\" sx={{ mb: 2 }}>\n            {error}\n          </Alert>\n        )}\n\n        <Grid container spacing={3}>\n          {/* Summary */}\n          <Grid item xs={12}>\n            <SummaryCards />\n          </Grid>\n\n          {/* Store List */}\n          <Grid item xs={12}>\n            <StoreList onSelect={setSelectedStore} selectedId={selectedStore?.id ?? null} />\n          </Grid>\n          {/* Store Selector */}\n          <Grid item xs={12}>\n            <StoreSelector \n              onStoreSelect={setSelectedStore}\n              selectedStore={selectedStore}\n            />\n          </Grid>\n\n          {/* Health Score */}\n          {selectedStore && (\n            <Grid item xs={12} md={4}>\n              <HealthIndicator \n                storeId={selectedStore.id}\n                healthScore={healthScore}\n                loading={loading}\n              />\n            </Grid>\n          )}\n\n          {/* Metrics Cards */}\n          {selectedStore && (\n            <Grid item xs={12} md={8}>\n              <MetricsCards \n                metrics={metrics}\n                loading={loading}\n              />\n            </Grid>\n          )}\n\n          {/* Anomaly Alerts */}\n          {selectedStore && (\n            <Grid item xs={12} md={6}>\n              <AnomalyAlerts \n                storeId={selectedStore.id}\n              />\n            </Grid>\n          )}\n\n          {/* Orders Table (replaces OrdersFeed) */}\n          {selectedStore && (\n            <Grid item xs={12} md={6}>\n              <OrdersTable storeId={selectedStore.id} />\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n    </Container>\n  );\n}\n\nexport default App;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,OAASC,SAAS,CAAEC,IAAI,CAAEC,UAAU,CAAEC,GAAG,CAAEC,KAAK,KAAQ,eAAe,CACvE,OAASC,aAAa,KAAQ,4BAA4B,CAC1D,OAASC,YAAY,KAAQ,2BAA2B,CACxD,OAASC,eAAe,KAAQ,8BAA8B,CAE9D,OAASC,aAAa,KAAQ,4BAA4B,CAC1D,OAASC,YAAY,KAAQ,2BAA2B,CACxD,OAASC,SAAS,KAAQ,wBAAwB,CAClD,OAASC,WAAW,KAAQ,0BAA0B,CAGtD,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAEnB,QAAS,CAAAC,GAAGA,CAAA,CAAG,KAAAC,iBAAA,CACb,KAAM,CAACC,aAAa,CAAEC,gBAAgB,CAAC,CAAGrB,QAAQ,CAAe,IAAI,CAAC,CACtE,KAAM,CAACsB,OAAO,CAAEC,UAAU,CAAC,CAAGvB,QAAQ,CAAsB,IAAI,CAAC,CACjE,KAAM,CAACwB,WAAW,CAAEC,cAAc,CAAC,CAAGzB,QAAQ,CAAqB,IAAI,CAAC,CACxE,KAAM,CAAC0B,OAAO,CAAEC,UAAU,CAAC,CAAG3B,QAAQ,CAAC,KAAK,CAAC,CAC7C,KAAM,CAAC4B,KAAK,CAAEC,QAAQ,CAAC,CAAG7B,QAAQ,CAAgB,IAAI,CAAC,CAEvD;AACAC,SAAS,CAAC,IAAM,CACd,GAAImB,aAAa,CAAE,CACjBU,cAAc,CAACV,aAAa,CAACW,EAAE,CAAC,CAChC;AACA,KAAM,CAAAC,QAAQ,CAAGC,WAAW,CAAC,IAAM,CACjCH,cAAc,CAACV,aAAa,CAACW,EAAE,CAAC,CAClC,CAAC,CAAE,KAAK,CAAC,CAET,MAAO,IAAMG,aAAa,CAACF,QAAQ,CAAC,CACtC,CACF,CAAC,CAAE,CAACZ,aAAa,CAAC,CAAC,CAEnB,KAAM,CAAAU,cAAc,CAAG,KAAO,CAAAK,OAAe,EAAK,CAChDR,UAAU,CAAC,IAAI,CAAC,CAChBE,QAAQ,CAAC,IAAI,CAAC,CAEd,GAAI,CACF;AACA;AACA;AACA;AACA;AAEA;AACAO,OAAO,CAACC,GAAG,CAAC,0BAA0B,CAAEF,OAAO,CAAC,CAClD,CAAE,MAAOG,GAAG,CAAE,CACZT,QAAQ,CAAC,4BAA4B,CAAC,CACtCO,OAAO,CAACR,KAAK,CAACU,GAAG,CAAC,CACpB,CAAC,OAAS,CACRX,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAAC,CAED,mBACEZ,IAAA,CAACb,SAAS,EAACqC,QAAQ,CAAC,IAAI,CAAAC,QAAA,cACtBvB,KAAA,CAACZ,GAAG,EAACoC,EAAE,CAAE,CAAEC,EAAE,CAAE,CAAE,CAAE,CAAAF,QAAA,eACjBzB,IAAA,CAACX,UAAU,EAACuC,OAAO,CAAC,IAAI,CAACC,SAAS,CAAC,IAAI,CAACC,YAAY,MAAAL,QAAA,CAAC,sBAErD,CAAY,CAAC,CAEZZ,KAAK,eACJb,IAAA,CAACT,KAAK,EAACwC,QAAQ,CAAC,OAAO,CAACL,EAAE,CAAE,CAAEM,EAAE,CAAE,CAAE,CAAE,CAAAP,QAAA,CACnCZ,KAAK,CACD,CACR,cAEDX,KAAA,CAACd,IAAI,EAAC6C,SAAS,MAACC,OAAO,CAAE,CAAE,CAAAT,QAAA,eAEzBzB,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAX,QAAA,cAChBzB,IAAA,CAACJ,YAAY,GAAE,CAAC,CACZ,CAAC,cAGPI,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAX,QAAA,cAChBzB,IAAA,CAACH,SAAS,EAACwC,QAAQ,CAAE/B,gBAAiB,CAACgC,UAAU,EAAAlC,iBAAA,CAAEC,aAAa,SAAbA,aAAa,iBAAbA,aAAa,CAAEW,EAAE,UAAAZ,iBAAA,UAAAA,iBAAA,CAAI,IAAK,CAAE,CAAC,CAC5E,CAAC,cAEPJ,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAAAX,QAAA,cAChBzB,IAAA,CAACR,aAAa,EACZ+C,aAAa,CAAEjC,gBAAiB,CAChCD,aAAa,CAAEA,aAAc,CAC9B,CAAC,CACE,CAAC,CAGNA,aAAa,eACZL,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAACI,EAAE,CAAE,CAAE,CAAAf,QAAA,cACvBzB,IAAA,CAACN,eAAe,EACd0B,OAAO,CAAEf,aAAa,CAACW,EAAG,CAC1BP,WAAW,CAAEA,WAAY,CACzBE,OAAO,CAAEA,OAAQ,CAClB,CAAC,CACE,CACP,CAGAN,aAAa,eACZL,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAACI,EAAE,CAAE,CAAE,CAAAf,QAAA,cACvBzB,IAAA,CAACP,YAAY,EACXc,OAAO,CAAEA,OAAQ,CACjBI,OAAO,CAAEA,OAAQ,CAClB,CAAC,CACE,CACP,CAGAN,aAAa,eACZL,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAACI,EAAE,CAAE,CAAE,CAAAf,QAAA,cACvBzB,IAAA,CAACL,aAAa,EACZyB,OAAO,CAAEf,aAAa,CAACW,EAAG,CAC3B,CAAC,CACE,CACP,CAGAX,aAAa,eACZL,IAAA,CAACZ,IAAI,EAAC+C,IAAI,MAACC,EAAE,CAAE,EAAG,CAACI,EAAE,CAAE,CAAE,CAAAf,QAAA,cACvBzB,IAAA,CAACF,WAAW,EAACsB,OAAO,CAAEf,aAAa,CAACW,EAAG,CAAE,CAAC,CACtC,CACP,EACG,CAAC,EACJ,CAAC,CACG,CAAC,CAEhB,CAEA,cAAe,CAAAb,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}