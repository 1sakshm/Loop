{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Card,CardContent,Typography,Box,CircularProgress,LinearProgress}from'@mui/material';import{apiService}from'../services/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export const HealthIndicator=_ref=>{let{storeId,healthScore:propHealthScore,loading}=_ref;const[healthScore,setHealthScore]=useState(propHealthScore);useEffect(()=>{if(!propHealthScore){fetchHealthScore();}else{setHealthScore(propHealthScore);}},[storeId,propHealthScore]);const fetchHealthScore=async()=>{try{const score=await apiService.getHealthScore(storeId);setHealthScore(score);}catch(error){console.error('Failed to fetch health score:',error);}};const getHealthColor=score=>{if(score>=80)return'#4caf50';// Green\nif(score>=60)return'#ff9800';// Orange\nreturn'#f44336';// Red\n};const getHealthEmoji=status=>{switch(status){case'healthy':return'üòä';case'warning':return'üòê';case'critical':return'üòü';default:return'‚ùì';}};return/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsxs(CardContent,{children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"Store Health Score\"}),loading?/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',py:4},children:/*#__PURE__*/_jsx(CircularProgress,{})}):healthScore?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',alignItems:'center',justifyContent:'center',flexDirection:'column',py:2},children:[/*#__PURE__*/_jsxs(Typography,{variant:\"h2\",style:{color:getHealthColor(healthScore.score)},children:[healthScore.score.toFixed(0),/*#__PURE__*/_jsx(Typography,{component:\"span\",variant:\"h4\",children:\"/100\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h3\",sx:{mt:1},children:getHealthEmoji(healthScore.status)}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",style:{color:getHealthColor(healthScore.score),textTransform:'uppercase',marginTop:8},children:healthScore.status})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",gutterBottom:true,children:\"Score Factors\"}),Object.entries(healthScore.factors).map(_ref2=>{let[key,value]=_ref2;return/*#__PURE__*/_jsxs(Box,{sx:{mb:1},children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',mb:0.5},children:[/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:key.replace(/_/g,' ').replace(/\\b\\w/g,l=>l.toUpperCase())}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",children:[value.toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:value,sx:{height:6,borderRadius:3,backgroundColor:'#e0e0e0','& .MuiLinearProgress-bar':{backgroundColor:getHealthColor(value)}}})]},key);})]}),healthScore.recommendations&&healthScore.recommendations.length>0&&/*#__PURE__*/_jsxs(Box,{sx:{mt:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",color:\"textSecondary\",gutterBottom:true,children:\"Recommendations\"}),healthScore.recommendations.map((rec,index)=>/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",sx:{mb:0.5},children:[\"\\u2022 \",rec]},index))]})]}):/*#__PURE__*/_jsx(Typography,{children:\"No health data available\"})]})});};","map":{"version":3,"names":["React","useEffect","useState","Card","CardContent","Typography","Box","CircularProgress","LinearProgress","apiService","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","HealthIndicator","_ref","storeId","healthScore","propHealthScore","loading","setHealthScore","fetchHealthScore","score","getHealthScore","error","console","getHealthColor","getHealthEmoji","status","children","variant","gutterBottom","sx","display","justifyContent","py","alignItems","flexDirection","style","color","toFixed","component","mt","textTransform","marginTop","Object","entries","factors","map","_ref2","key","value","mb","replace","l","toUpperCase","height","borderRadius","backgroundColor","recommendations","length","rec","index"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/HealthIndicator.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Card, CardContent, Typography, Box, CircularProgress, LinearProgress } from '@mui/material';\nimport { HealthScore } from '../types';\nimport { apiService } from '../services/api';\n\ninterface HealthIndicatorProps {\n  storeId: string;\n  healthScore: HealthScore | null;\n  loading: boolean;\n}\n\nexport const HealthIndicator: React.FC<HealthIndicatorProps> = ({ \n  storeId, \n  healthScore: propHealthScore, \n  loading \n}) => {\n  const [healthScore, setHealthScore] = useState<HealthScore | null>(propHealthScore);\n\n  useEffect(() => {\n    if (!propHealthScore) {\n      fetchHealthScore();\n    } else {\n      setHealthScore(propHealthScore);\n    }\n  }, [storeId, propHealthScore]);\n\n  const fetchHealthScore = async () => {\n    try {\n      const score = await apiService.getHealthScore(storeId);\n      setHealthScore(score);\n    } catch (error) {\n      console.error('Failed to fetch health score:', error);\n    }\n  };\n\n  const getHealthColor = (score: number) => {\n    if (score >= 80) return '#4caf50'; // Green\n    if (score >= 60) return '#ff9800'; // Orange\n    return '#f44336'; // Red\n  };\n\n  const getHealthEmoji = (status: string) => {\n    switch(status) {\n      case 'healthy': return 'üòä';\n      case 'warning': return 'üòê';\n      case 'critical': return 'üòü';\n      default: return '‚ùì';\n    }\n  };\n\n  return (\n    <Card>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Store Health Score\n        </Typography>\n        \n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress />\n          </Box>\n        ) : healthScore ? (\n          <>\n            <Box sx={{ \n              display: 'flex', \n              alignItems: 'center', \n              justifyContent: 'center',\n              flexDirection: 'column',\n              py: 2 \n            }}>\n              <Typography \n                variant=\"h2\" \n                style={{ color: getHealthColor(healthScore.score) }}\n              >\n                {healthScore.score.toFixed(0)}\n                <Typography component=\"span\" variant=\"h4\">/100</Typography>\n              </Typography>\n              <Typography variant=\"h3\" sx={{ mt: 1 }}>\n                {getHealthEmoji(healthScore.status)}\n              </Typography>\n              <Typography \n                variant=\"h6\" \n                style={{ \n                  color: getHealthColor(healthScore.score),\n                  textTransform: 'uppercase',\n                  marginTop: 8\n                }}\n              >\n                {healthScore.status}\n              </Typography>\n            </Box>\n\n            {/* Factor Breakdown */}\n            <Box sx={{ mt: 3 }}>\n              <Typography variant=\"subtitle2\" color=\"textSecondary\" gutterBottom>\n                Score Factors\n              </Typography>\n              {Object.entries(healthScore.factors).map(([key, value]) => (\n                <Box key={key} sx={{ mb: 1 }}>\n                  <Box sx={{ display: 'flex', justifyContent: 'space-between', mb: 0.5 }}>\n                    <Typography variant=\"body2\">\n                      {key.replace(/_/g, ' ').replace(/\\b\\w/g, l => l.toUpperCase())}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      {value.toFixed(0)}%\n                    </Typography>\n                  </Box>\n                  <LinearProgress \n                    variant=\"determinate\" \n                    value={value} \n                    sx={{\n                      height: 6,\n                      borderRadius: 3,\n                      backgroundColor: '#e0e0e0',\n                      '& .MuiLinearProgress-bar': {\n                        backgroundColor: getHealthColor(value)\n                      }\n                    }}\n                  />\n                </Box>\n              ))}\n            </Box>\n\n            {/* Recommendations */}\n            {healthScore.recommendations && healthScore.recommendations.length > 0 && (\n              <Box sx={{ mt: 3 }}>\n                <Typography variant=\"subtitle2\" color=\"textSecondary\" gutterBottom>\n                  Recommendations\n                </Typography>\n                {healthScore.recommendations.map((rec, index) => (\n                  <Typography key={index} variant=\"body2\" sx={{ mb: 0.5 }}>\n                    ‚Ä¢ {rec}\n                  </Typography>\n                ))}\n              </Box>\n            )}\n          </>\n        ) : (\n          <Typography>No health data available</Typography>\n        )}\n      </CardContent>\n    </Card>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}