{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Saksham\\\\Loop\\\\frontend\\\\src\\\\components\\\\OrdersFeed.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, Typography, List, ListItem, Chip, Box, CircularProgress } from '@mui/material';\nimport { apiService } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const OrdersFeed = ({\n  storeId\n}) => {\n  _s();\n  const [orders, setOrders] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchOrders();\n\n    // Optional: Set up WebSocket for real-time updates\n    // const ws = apiService.connectToOrderStream((order) => {\n    //   if (order.store_id === storeId) {\n    //     setOrders(prev => [order, ...prev].slice(0, 20));\n    //   }\n    // });\n    // \n    // return () => ws.close();\n  }, [storeId]);\n  const fetchOrders = async () => {\n    setLoading(true);\n    try {\n      const data = await apiService.getOrders(storeId, 20);\n      setOrders(data);\n    } catch (error) {\n      console.error('Failed to fetch orders:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getStatusColor = status => {\n    switch (status) {\n      case 'completed':\n        return 'success';\n      case 'failed':\n        return 'error';\n      case 'cancelled':\n        return 'warning';\n      default:\n        return 'default';\n    }\n  };\n  const formatTime = dateString => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('en-US', {\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      height: '400px'\n    },\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"Recent Orders\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          display: 'flex',\n          justifyContent: 'center',\n          py: 4\n        },\n        children: /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(List, {\n        sx: {\n          maxHeight: '320px',\n          overflow: 'auto'\n        },\n        children: orders.length === 0 ? /*#__PURE__*/_jsxDEV(Typography, {\n          color: \"textSecondary\",\n          align: \"center\",\n          children: \"No recent orders\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 15\n        }, this) : orders.map(order => /*#__PURE__*/_jsxDEV(ListItem, {\n          sx: {\n            borderBottom: '1px solid #e0e0e0',\n            flexDirection: 'column',\n            alignItems: 'flex-start'\n          },\n          children: [/*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              justifyContent: 'space-between',\n              width: '100%',\n              mb: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              fontWeight: \"bold\",\n              children: [\"Order #\", order.id.slice(-6)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Chip, {\n              label: order.status,\n              size: \"small\",\n              color: getStatusColor(order.status)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 102,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              gap: 2,\n              width: '100%'\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: formatTime(order.created_at)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              children: [\"$\", order.total_amount.toFixed(2)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: [order.items_count, \" items\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 21\n            }, this), order.processing_time_seconds && /*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"body2\",\n              color: \"textSecondary\",\n              children: [Math.round(order.processing_time_seconds / 60), \" min\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 120,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 19\n          }, this), order.has_error && /*#__PURE__*/_jsxDEV(Typography, {\n            variant: \"caption\",\n            color: \"error\",\n            sx: {\n              mt: 0.5\n            },\n            children: [\"Error: \", order.error_type]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 21\n          }, this)]\n        }, order.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 17\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 67,\n    columnNumber: 5\n  }, this);\n};\n_s(OrdersFeed, \"ug8UXigqZ8+/aovEHLbbhGhrhf4=\");\n_c = OrdersFeed;\nvar _c;\n$RefreshReg$(_c, \"OrdersFeed\");","map":{"version":3,"names":["React","useState","useEffect","Card","CardContent","Typography","List","ListItem","Chip","Box","CircularProgress","apiService","jsxDEV","_jsxDEV","OrdersFeed","storeId","_s","orders","setOrders","loading","setLoading","fetchOrders","data","getOrders","error","console","getStatusColor","status","formatTime","dateString","date","Date","toLocaleTimeString","hour","minute","sx","height","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","display","justifyContent","py","maxHeight","overflow","length","color","align","map","order","borderBottom","flexDirection","alignItems","width","mb","fontWeight","id","slice","label","size","gap","created_at","total_amount","toFixed","items_count","processing_time_seconds","Math","round","has_error","mt","error_type","_c","$RefreshReg$"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/OrdersFeed.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  CardContent, \n  Typography, \n  List, \n  ListItem, \n  ListItemText,\n  Chip,\n  Box,\n  CircularProgress\n} from '@mui/material';\nimport { Order } from '../types';\nimport { apiService } from '../services/api';\n\ninterface OrdersFeedProps {\n  storeId: string;\n}\n\nexport const OrdersFeed: React.FC<OrdersFeedProps> = ({ storeId }) => {\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchOrders();\n    \n    // Optional: Set up WebSocket for real-time updates\n    // const ws = apiService.connectToOrderStream((order) => {\n    //   if (order.store_id === storeId) {\n    //     setOrders(prev => [order, ...prev].slice(0, 20));\n    //   }\n    // });\n    // \n    // return () => ws.close();\n  }, [storeId]);\n\n  const fetchOrders = async () => {\n    setLoading(true);\n    try {\n      const data = await apiService.getOrders(storeId, 20);\n      setOrders(data);\n    } catch (error) {\n      console.error('Failed to fetch orders:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch(status) {\n      case 'completed': return 'success';\n      case 'failed': return 'error';\n      case 'cancelled': return 'warning';\n      default: return 'default';\n    }\n  };\n\n  const formatTime = (dateString: string) => {\n    const date = new Date(dateString);\n    return date.toLocaleTimeString('en-US', { \n      hour: '2-digit', \n      minute: '2-digit' \n    });\n  };\n\n  return (\n    <Card sx={{ height: '400px' }}>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Recent Orders\n        </Typography>\n        \n        {loading ? (\n          <Box sx={{ display: 'flex', justifyContent: 'center', py: 4 }}>\n            <CircularProgress />\n          </Box>\n        ) : (\n          <List sx={{ maxHeight: '320px', overflow: 'auto' }}>\n            {orders.length === 0 ? (\n              <Typography color=\"textSecondary\" align=\"center\">\n                No recent orders\n              </Typography>\n            ) : (\n              orders.map((order) => (\n                <ListItem \n                  key={order.id}\n                  sx={{ \n                    borderBottom: '1px solid #e0e0e0',\n                    flexDirection: 'column',\n                    alignItems: 'flex-start'\n                  }}\n                >\n                  <Box sx={{ \n                    display: 'flex', \n                    justifyContent: 'space-between', \n                    width: '100%',\n                    mb: 1\n                  }}>\n                    <Typography variant=\"body2\" fontWeight=\"bold\">\n                      Order #{order.id.slice(-6)}\n                    </Typography>\n                    <Chip \n                      label={order.status} \n                      size=\"small\"\n                      color={getStatusColor(order.status) as any}\n                    />\n                  </Box>\n                  \n                  <Box sx={{ display: 'flex', gap: 2, width: '100%' }}>\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                      {formatTime(order.created_at)}\n                    </Typography>\n                    <Typography variant=\"body2\">\n                      ${order.total_amount.toFixed(2)}\n                    </Typography>\n                    <Typography variant=\"body2\" color=\"textSecondary\">\n                      {order.items_count} items\n                    </Typography>\n                    {order.processing_time_seconds && (\n                      <Typography variant=\"body2\" color=\"textSecondary\">\n                        {Math.round(order.processing_time_seconds / 60)} min\n                      </Typography>\n                    )}\n                  </Box>\n\n                  {order.has_error && (\n                    <Typography variant=\"caption\" color=\"error\" sx={{ mt: 0.5 }}>\n                      Error: {order.error_type}\n                    </Typography>\n                  )}\n                </ListItem>\n              ))\n            )}\n          </List>\n        )}\n      </CardContent>\n    </Card>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}