{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Saksham\\\\Loop\\\\frontend\\\\src\\\\components\\\\AnomalyAlerts.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Card, CardContent, Typography, Alert, AlertTitle, Box, Chip } from '@mui/material';\nimport { apiService } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AnomalyAlerts = ({\n  storeId\n}) => {\n  _s();\n  const [anomalies, setAnomalies] = useState([]);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    fetchAnomalies();\n    // Refresh anomalies every 30 seconds\n    const interval = setInterval(fetchAnomalies, 30000);\n    return () => clearInterval(interval);\n  }, [storeId]);\n  const fetchAnomalies = async () => {\n    try {\n      const data = await apiService.detectAnomalies(storeId);\n      setAnomalies(data);\n    } catch (error) {\n      console.error('Failed to fetch anomalies:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const getSeverityColor = severity => {\n    switch (severity) {\n      case 'high':\n        return 'error';\n      case 'medium':\n        return 'warning';\n      case 'low':\n        return 'info';\n      default:\n        return 'default';\n    }\n  };\n  const getAnomalyIcon = type => {\n    switch (type) {\n      case 'high_failure_rate':\n        return '‚ö†Ô∏è';\n      case 'slow_processing':\n        return 'üêå';\n      case 'no_orders':\n        return 'üìâ';\n      default:\n        return '‚ùó';\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    sx: {\n      height: '400px'\n    },\n    children: /*#__PURE__*/_jsxDEV(CardContent, {\n      children: [/*#__PURE__*/_jsxDEV(Typography, {\n        variant: \"h6\",\n        gutterBottom: true,\n        children: \"Anomaly Detection\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 9\n      }, this), loading ? /*#__PURE__*/_jsxDEV(Typography, {\n        color: \"textSecondary\",\n        children: \"Checking for anomalies...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 11\n      }, this) : anomalies.length === 0 ? /*#__PURE__*/_jsxDEV(Alert, {\n        severity: \"success\",\n        children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n          children: \"All Systems Normal\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), \"No anomalies detected. Store is operating normally.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Box, {\n        sx: {\n          maxHeight: '320px',\n          overflow: 'auto'\n        },\n        children: anomalies.map((anomaly, index) => /*#__PURE__*/_jsxDEV(Alert, {\n          severity: getSeverityColor(anomaly.severity),\n          sx: {\n            mb: 2\n          },\n          children: /*#__PURE__*/_jsxDEV(Box, {\n            sx: {\n              display: 'flex',\n              alignItems: 'center',\n              gap: 1\n            },\n            children: [/*#__PURE__*/_jsxDEV(Typography, {\n              variant: \"h6\",\n              children: getAnomalyIcon(anomaly.type)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(Box, {\n              sx: {\n                flex: 1\n              },\n              children: [/*#__PURE__*/_jsxDEV(AlertTitle, {\n                sx: {\n                  display: 'flex',\n                  alignItems: 'center',\n                  gap: 1\n                },\n                children: [anomaly.type.replace(/_/g, ' ').toUpperCase(), /*#__PURE__*/_jsxDEV(Chip, {\n                  label: anomaly.severity,\n                  size: \"small\",\n                  color: getSeverityColor(anomaly.severity)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 89,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 87,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"body2\",\n                children: anomaly.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 95,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(Typography, {\n                variant: \"caption\",\n                color: \"textSecondary\",\n                children: [\"Detected at \", new Date(anomaly.detected_at).toLocaleTimeString()]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 98,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 86,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 17\n          }, this)\n        }, anomaly.id || index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 5\n  }, this);\n};\n_s(AnomalyAlerts, \"z8UJE8eSHlz93SDh/ccX9Thvux0=\");\n_c = AnomalyAlerts;\nvar _c;\n$RefreshReg$(_c, \"AnomalyAlerts\");","map":{"version":3,"names":["React","useState","useEffect","Card","CardContent","Typography","Alert","AlertTitle","Box","Chip","apiService","jsxDEV","_jsxDEV","AnomalyAlerts","storeId","_s","anomalies","setAnomalies","loading","setLoading","fetchAnomalies","interval","setInterval","clearInterval","data","detectAnomalies","error","console","getSeverityColor","severity","getAnomalyIcon","type","sx","height","children","variant","gutterBottom","fileName","_jsxFileName","lineNumber","columnNumber","color","length","maxHeight","overflow","map","anomaly","index","mb","display","alignItems","gap","flex","replace","toUpperCase","label","size","description","Date","detected_at","toLocaleTimeString","id","_c","$RefreshReg$"],"sources":["C:/Users/Saksham/Loop/frontend/src/components/AnomalyAlerts.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  Card, \n  CardContent, \n  Typography, \n  Alert,\n  AlertTitle,\n  Box,\n  Chip\n} from '@mui/material';\nimport { Anomaly } from '../types';\nimport { apiService } from '../services/api';\n\ninterface AnomalyAlertsProps {\n  storeId: string;\n}\n\nexport const AnomalyAlerts: React.FC<AnomalyAlertsProps> = ({ storeId }) => {\n  const [anomalies, setAnomalies] = useState<Anomaly[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    fetchAnomalies();\n    // Refresh anomalies every 30 seconds\n    const interval = setInterval(fetchAnomalies, 30000);\n    return () => clearInterval(interval);\n  }, [storeId]);\n\n  const fetchAnomalies = async () => {\n    try {\n      const data = await apiService.detectAnomalies(storeId);\n      setAnomalies(data);\n    } catch (error) {\n      console.error('Failed to fetch anomalies:', error);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getSeverityColor = (severity: string) => {\n    switch(severity) {\n      case 'high': return 'error';\n      case 'medium': return 'warning';\n      case 'low': return 'info';\n      default: return 'default';\n    }\n  };\n\n  const getAnomalyIcon = (type: string) => {\n    switch(type) {\n      case 'high_failure_rate': return '‚ö†Ô∏è';\n      case 'slow_processing': return 'üêå';\n      case 'no_orders': return 'üìâ';\n      default: return '‚ùó';\n    }\n  };\n\n  return (\n    <Card sx={{ height: '400px' }}>\n      <CardContent>\n        <Typography variant=\"h6\" gutterBottom>\n          Anomaly Detection\n        </Typography>\n        \n        {loading ? (\n          <Typography color=\"textSecondary\">\n            Checking for anomalies...\n          </Typography>\n        ) : anomalies.length === 0 ? (\n          <Alert severity=\"success\">\n            <AlertTitle>All Systems Normal</AlertTitle>\n            No anomalies detected. Store is operating normally.\n          </Alert>\n        ) : (\n          <Box sx={{ maxHeight: '320px', overflow: 'auto' }}>\n            {anomalies.map((anomaly, index) => (\n              <Alert \n                key={anomaly.id || index}\n                severity={getSeverityColor(anomaly.severity) as any}\n                sx={{ mb: 2 }}\n              >\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                  <Typography variant=\"h6\">\n                    {getAnomalyIcon(anomaly.type)}\n                  </Typography>\n                  <Box sx={{ flex: 1 }}>\n                    <AlertTitle sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\n                      {anomaly.type.replace(/_/g, ' ').toUpperCase()}\n                      <Chip \n                        label={anomaly.severity} \n                        size=\"small\"\n                        color={getSeverityColor(anomaly.severity) as any}\n                      />\n                    </AlertTitle>\n                    <Typography variant=\"body2\">\n                      {anomaly.description}\n                    </Typography>\n                    <Typography variant=\"caption\" color=\"textSecondary\">\n                      Detected at {new Date(anomaly.detected_at).toLocaleTimeString()}\n                    </Typography>\n                  </Box>\n                </Box>\n              </Alert>\n            ))}\n          </Box>\n        )}\n      </CardContent>\n    </Card>\n  );\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}